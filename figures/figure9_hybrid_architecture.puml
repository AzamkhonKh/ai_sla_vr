@startuml
skinparam componentStyle uml2
skinparam packageStyle rectangle
skinparam defaultTextAlignment center

actor "Learner" as User

package "On-Device (VR Headset)" as Device {
    component "On-Device STT\n(Whisper Tiny)\n<size:10><b><200ms Response</b></size>" as DevSTT
    component "On-Device NLU\n(Simple Intent)\n<size:10><b><200ms Response</b></size>" as DevNLU
}

package "Cloud Services" as Cloud {
    component "Cloud STT Service\n(Deepgram)\n<size:10><b>(FR1) 90% Accuracy</b></size>\n<size:10><b>(FR4) Phoneme Analysis</b></size>" as CloudSTT
    component "Conversation Service\n(Cloud LLM / GPT-4)\n<size:10><b>(FR2) Dialogue Gen.</b></size>\n<size:10><b>(FR5) Adaptivity</b></size>" as Convo
    component "Cloud TTS Service\n(ElevenLabs)\n<size:10><b>(FR3) Natural Prosody</b></size>" as CloudTTS
}

' Loop 1: Immersion
User -down-> DevSTT : User Speech
DevSTT -down-> DevNLU : Simple Intent
DevNLU .up.> User : <color:red><b>Loop 1: <200ms</b></color>\n<color:red>(Immersion)</color>

' Loop 2: Quality
User -right-> CloudSTT : User Speech
CloudSTT -down-> Convo
Convo -down-> CloudTTS
CloudTTS -left-> User : NPC Voice\n<color:blue><b>Loop 2: <1.5s</b></color>\n<color:blue>(Quality Dialogue)</color>

@enduml
